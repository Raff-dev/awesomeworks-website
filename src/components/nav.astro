---
import LanguagePicker from "./language-picker.astro";
import { t, type Locale } from "@/i18n/utils";

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const i = t(locale);
---

<nav
  id="navbar"
  class="fixed top-0 right-0 left-0 z-50 border-b border-white/[0.06] bg-background/80 backdrop-blur-xl transition-all"
>
  <div
    class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <!-- Logo -->
    <a href={`/${locale}/`} class="flex items-center gap-2.5">
      <img src="/icon.png" alt="AwesomeWorks" class="h-8 w-8 rounded-md" width="32" height="32" />
      <span class="text-lg font-bold text-foreground">AwesomeWorks</span>
    </a>

    <!-- Desktop nav -->
    <div class="hidden items-center gap-8 md:flex">
      <a
        href="#services"
        class="text-sm text-muted-foreground transition-colors hover:text-foreground"
        >{i.nav.services}</a
      >
      <a
        href="#why-ai"
        class="text-sm text-muted-foreground transition-colors hover:text-foreground"
        >{i.nav.why}</a
      >
      <a
        href="#process"
        class="text-sm text-muted-foreground transition-colors hover:text-foreground"
        >{i.nav.process}</a
      >
      <a
        href="#team"
        class="text-sm text-muted-foreground transition-colors hover:text-foreground"
        >{i.nav.about}</a
      >
      <a
        href="#products"
        class="text-sm text-muted-foreground transition-colors hover:text-foreground"
        >{i.nav.products}</a
      >
    </div>

    <!-- Right section -->
    <div class="hidden items-center gap-3 md:flex">
      <LanguagePicker currentLocale={locale} />
      <a
        href="#contact"
        class="inline-flex items-center rounded-lg bg-gradient-to-r from-indigo-600 to-indigo-400 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-500/25 transition-all hover:shadow-indigo-500/40 hover:brightness-110"
      >
        {i.nav.cta}
      </a>
    </div>

    <!-- Mobile hamburger -->
    <button
      id="mobile-menu-btn"
      class="flex h-10 w-10 items-center justify-center rounded-lg border border-white/[0.08] bg-white/[0.04] md:hidden"
      aria-label="Toggle menu"
    >
      <svg
        id="hamburger-icon"
        class="h-5 w-5 text-foreground"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
      >
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
      <svg
        id="close-icon"
        class="hidden h-5 w-5 text-foreground"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Mobile menu -->
  <div
    id="mobile-menu"
    class="hidden border-t border-white/[0.06] bg-background/95 backdrop-blur-xl md:hidden"
  >
    <div class="flex flex-col gap-1 px-4 py-4">
      <a
        href="#services"
        class="rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-white/[0.04] hover:text-foreground"
        >{i.nav.services}</a
      >
      <a
        href="#why-ai"
        class="rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-white/[0.04] hover:text-foreground"
        >{i.nav.why}</a
      >
      <a
        href="#process"
        class="rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-white/[0.04] hover:text-foreground"
        >{i.nav.process}</a
      >
      <a
        href="#team"
        class="rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-white/[0.04] hover:text-foreground"
        >{i.nav.about}</a
      >
      <a
        href="#products"
        class="rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-white/[0.04] hover:text-foreground"
        >{i.nav.products}</a
      >
      <div
        class="mt-3 flex items-center gap-3 border-t border-white/[0.06] pt-4"
      >
        <LanguagePicker currentLocale={locale} />
        <a
          href="#contact"
          class="flex-1 rounded-lg bg-gradient-to-r from-indigo-600 to-indigo-400 px-4 py-2.5 text-center text-sm font-semibold text-white"
        >
          {i.nav.cta}
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  const btn = document.getElementById("mobile-menu-btn");
  const menu = document.getElementById("mobile-menu");
  const hamburger = document.getElementById("hamburger-icon");
  const close = document.getElementById("close-icon");

  btn?.addEventListener("click", () => {
    menu?.classList.toggle("hidden");
    hamburger?.classList.toggle("hidden");
    close?.classList.toggle("hidden");
  });

  menu?.querySelectorAll("a[href^='#']").forEach((link) => {
    link.addEventListener("click", () => {
      menu?.classList.add("hidden");
      hamburger?.classList.remove("hidden");
      close?.classList.add("hidden");
    });
  });
</script>
